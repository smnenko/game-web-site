{% extends 'core/base.html' %}

{% block title %}
    Games compilation
{% endblock %}

{% block content %}
    <div class="content__games d-flex h-100 align-items-center">
        <div class="content__games__container w-100 h-75">
            <div class="h-100 background-black p-3">
                <div class="row align-items-center my-1">
                    <h4 class="col-2">Filter</h4>
                    <div class="col-10 w-50 mx-auto d-flex align-items-center justify-content-between">
                        <a class="sort__item" href="?ordering=name&order=asc">Alphabet</a>
                        <a class="sort__item" href="?ordering=date_release&order=asc">Newest</a>
                        <a class="sort__item">Popular</a>
                        <a class="sort__item" href="?ordering=ratings_critics&order=asc">Rating</a>
                    </div>
                </div>
                <div class="row h-100">
                    <div class="col-2">
                        <div class="field w-100 my-2">
                            <input class="w-100" type="text" placeholder="Title">
                        </div>
                        <div class="field w-100 my-2">
                            <input class="w-100" type="text" placeholder="Genres">
                        </div>
                        <div class="field w-100 my-2">
                            <input class="w-100" type="text" placeholder="Platforms">
                        </div>
                    </div>
                    <div class="col-10 mb-5">
{#                        <div class="row h-100 w-100 align-items-center" style="overflow-y: auto">#}
{#                            <div class="col-3 h-25 px-1 my-1"><div class="game bg-dark h-100">Game 1</div></div>#}
{#                            <div class="col-3 h-25 px-1 my-1"><div class="game bg-dark h-100">Game 1</div></div>#}
{#                            <div class="col-3 h-25 px-1 my-1"><div class="game bg-dark h-100">Game 1</div></div>#}
{#                            <div class="col-3 h-25 px-1 my-1"><div class="game bg-dark h-100">Game 1</div></div>#}
{#                            <div class="col-3 h-25 px-1 my-1"><div class="game bg-dark h-100">Game 1</div></div>#}
{#                        </div>#}

                        <div class="d-flex flex-column h-100 w-100" style="overflow-y: auto">
                            {% cycle 'open' 'game' 'game' 'game' 'close' as game_cycle silent %}
                            {% for game in page_obj %}
                                {% if game_cycle == 'open' %}
                                    {% cycle game_cycle %}
                                    <div class="col-12 row h-25">
                                {% endif %}

                                {% if game_cycle == 'game' %}
                                    <div class="col-4 my-2">
                                        <div class="game bg-dark h-100 w-100" style="background-image: url({{ game.logo }})">
                                            <a class="game__title" href="{% url 'game' game.id %}">{{ game.name }}</a>
                                            <a class="game__must item" url="{% url 'must' game.id %}">
                                                {% if game.status %}
                                                    UnMust
                                                {% else %}
                                                    Must
                                                {% endif %}
                                            </a>
                                        </div>
                                    </div>
                                    {% cycle game_cycle %}
                                {% endif %}

                                {% if game_cycle == 'close' %}
                                    </div>
                                    {% cycle game_cycle %}
                                {% endif %}
                            {% endfor %}
                        </div>
                        <div class="d-flex pagination bg-dark mt-4 w-50 justify-content-between m-auto">
                            {% if page_obj.has_previous %}
                                {% if page_obj.previous_page_number != 1 %}
                                    <a class="page" onclick="toPage(1)">1</a>
                                {% endif %}
                                <a class="page" onclick="toPage({{ page_obj.previous_page_number }})">{{ page_obj.previous_page_number }}</a>
                            {% endif %}
                            <span class="page page-active">{{ page_obj.number }}</span>
                            {% if page_obj.has_next %}
                                <a class="page" onclick="toPage({{ page_obj.next_page_number }})">{{ page_obj.next_page_number }}</a>
                                {% if page_obj.number == 1 and paginator.num_pages > 5 %}
                                    <a class="page" onclick="toPage(3)">3</a>
                                    <a class="page" onclick="toPage(4)">4</a>
                                {% endif %}
                                {% if page_obj.number == 2 and paginator.num_pages > 6 %}
                                    <a class="page" onclick="toPage(4)">4</a>
                                {% endif %}
                                {% if page_obj.number != page_obj.num_pages and page_obj.next_page_number != page_obj.paginator.num_pages %}
                                    <a class="page" onclick="toPage({{ page_obj.paginator.num_pages }})">{{ page_obj.paginator.num_pages }}</a>
                                {% endif %}
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}